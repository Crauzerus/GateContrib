# Example 4

## About

This example includes:

* definition of the 4 different point sources

* two-photon emission from pPs decay ( each source is placed in the different position )

* emission of prompt gamma with fixed deexcitation energy ( each source emits prompt gamma with different energy )

## Additional information about macros

Because we want to focus only on Compton scattering without simulating electrons, only for presented examples we use unreal cuts:

`/gate/physics/Electron/SetCutInRegion  crystal1  1.0 cm`

`/gate/physics/Positron/SetCutInRegion  crystal1  1.0 cm`

Due to those cuts the variable edep represents energy deposition during Compton scattering for gammas with energy higher than 511 keV.

## How to run example

To run both simulation and analysis just type:

```bash
bash run.sh
```

or if you want to rerun analysis type:
```bash
bash run.sh ONLY_ANALYSIS
```

## Results

All presented here results are generated by dedicated [program](../program/README.md)

### Energy deposition

![Energy deposition](histograms/energy_deposition_spectra_pPs.png "Energy deposition")

This histogram presents energy deposition by gammas in detector:

* blue line - whole energy deposition spectrum

* red line - energy deposition from prompt gamma 

* green line - energy deposition from para-positronium annihilation gammas

![Energy deposition only prompt](histograms/EnergyDepositionPrompt_pPs.png "Energy deposition - only prompt spectrum")

This histogram represent only energy deposition from prompt gamma. Because we have in this example four sources and each emits prompt gamma with different initial energy ( 700, 1000, 1500 and 2000 keV ) that is why we observe this saw plot with maxima around 512, 796, 1282 and 1773 keV.

### Positronium lifetime

![Positronium lifetime](histograms/Lifetime_pPs.png "Positronium lifetime")

Calculated positronium lifetime based on data from first hit of any annihilation photon and the prompt gamma ( blue line ).

Red curve represents fitted lifetime function f(t) for fixed lifetime ( t0 = 0.1244 ns ) given by equation:

`f(t) = A*exp(-t/t0) + B`

### Source position

![Source position](histograms/SourcePosition_pPs.png "Source position")

Reconstructed source positions based on information from tracks.
